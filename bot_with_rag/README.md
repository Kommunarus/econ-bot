# ü§ñ RAG-–±–æ—Ç ¬´–û–º–∞—Ä –•–∞–π—è–º¬ª

–ß–∞—Ç-–±–æ—Ç —Å —Ä–µ—Ç—Ä–∏–≤–∞–ª—å–Ω—ã–º-augmented generation (RAG), –æ—Ç–≤–µ—á–∞—é—â–∏–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –∂–∏–∑–Ω–∏ –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–µ –û–º–∞—Ä–∞ –•–∞–π—è–º–∞.

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

- **–ö–Ω–∏–≥–∞:** ¬´–†—É–±–∞–∏. –ü–æ–ª–Ω–æ–µ —Å–æ–±—Ä–∞–Ω–∏–µ¬ª (—Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç)
- **–í—Å–µ–≥–æ —á–∞–Ω–∫–æ–≤:** 1,684
- **LLM:** –ª–æ–∫–∞–ª—å–Ω–∞—è `openai/gpt-oss-20b` (–¥–ª—è —á–∞—Ç-–±–æ—Ç–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞ –∫–∞—á–µ—Å—Ç–≤–∞)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–±–æ—Ä–∫–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã

bash cd bot_with_rag/ python ./src/build_index.py

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ß—Ç–µ–Ω–∏–µ –∏ –æ—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∫–Ω–∏–≥–∏
- –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏ (—Ä–∞–∑–º–µ—Ä: 300‚Äì800 —Ç–æ–∫–µ–Ω–æ–≤)
- –°–æ–∑–¥–∞–Ω–∏–µ FAISS –∏–Ω–¥–µ–∫—Å–∞ ‚Üí `./faiss/`
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–∞–Ω–∫–æ–≤ –≤ pickle ‚Üí `./docdb/`

### 2. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

bash python rag_final.py

–ó–∞–ø—É—Å—Ç–∏—Ç—Å—è –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –±–æ—Ç —Å **–ø–∞–º—è—Ç—å—é –¥–∏–∞–ª–æ–≥–∞** –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
Q: –ø—Ä–∏–≤–µ—Ç. –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –º–æ–∏ –≤–æ–ø—Ä–æ—Å—ã, –∑–æ–≤–∏ –º–µ–Ω—è –ö—Ä–æ—Ç 

A: –ü—Ä–∏–≤–µ—Ç, –ö—Ä–æ—Ç! –ö–∞–∫ —è –º–æ–≥—É –ø–æ–º–æ—á—å?

### –ë–∏–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç—ã

Q: —Ö–æ—á—É —É–∑–Ω–∞—Ç—å –∫–æ–≥–¥–∞ —Ä–æ–¥–∏–ª—Å—è –û–º–∞—Ä –•–∞–π—è–º 

A: –û–º–∞—Ä –•–∞–π—è–º, —Å–æ–≥–ª–∞—Å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏–≤—à–µ–º—É—Å—è –≤ –ø–µ—Ä–µ—Å–∫–∞–∑–µ —Ç–µ–∫—Å—Ç—É‚Äë–≥–æ—Ä–æ—Å–∫–æ–ø—É –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º –∏–Ω–¥–∏–π—Å–∫–æ–≥–æ —É—á–µ–Ω–æ–≥–æ –°–≤–∞–º–∏ –ì–æ–≤–∏–Ω–¥–∞ –¢–∏—Ä—Ç—Ö–∏, —Ä–æ–¥–∏–ª—Å—è 18 –º–∞—è 1048 –≥–æ–¥–∞.

### –§–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
Q: –∞ —á—Ç–æ —Ç–∞–∫–æ–µ —Ä—É–±–∞–∏? 

A: –†—É–±–∞–π (–∏–ª–∏ —Ä—É–±–∞–∏) ‚Äì —ç—Ç–æ –∫–æ—Ä–æ—Ç–∫–∞—è –ø–æ—ç—Ç–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º–∞, —Å–æ—Å—Ç–æ—è—â–∞—è –∏–∑ —á–µ—Ç—ã—Ä—ë—Ö —Å—Ç—Ä–æ–∫ —Å —Ä–∏—Ñ–º–æ–≤–∫–æ–π –ê–ë–ê–í –∏ –æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –≥–ª—É–±–æ–∫–∏–π —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–π —Å–º—ã—Å–ª...


---

## üõ°Ô∏è –ú–µ—Ö–∞–Ω–∏–∑–º –æ—Ç–∫–∞–∑–∞

–ë–æ—Ç –Ω–µ –≤—ã–¥—É–º—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã, –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç:

- **Score threshold:** –µ—Å–ª–∏ —Å–∫–æ—Ä —á–∞–Ω–∫–æ–≤ –∏–∑ FAISS –Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞ ‚Äî —á–∞–Ω–∫ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- **–ü—Ä–∏–º–µ—Ä –æ—Ç–∫–∞–∑–∞:**
  ```
  Q: –ø—Ä–æ–¥–æ–ª–∂–∏ —Ä—É–±–∞–∏: –ù–∞ —Ç–æ –∏ —Å–µ—Ä–¥—Ü–µ: –ñ–∏–∑–Ω—å –±–µ–∑ —Å—É–µ—Ç—ã –ø–æ—Å—Ç–∏—á—å...
  A: –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –Ω–µ—Ç –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —Å—Ç—Ä–æ–∫ 
     —ç—Ç–æ–≥–æ —Ä—É–±–∞—è, –ø–æ—ç—Ç–æ–º—É —è –Ω–µ –º–æ–≥—É –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –µ–≥–æ —Ç–æ—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.
  ```

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

| –ü—Ä–æ–±–ª–µ–º–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| üìù –†—É–±–∞–∏ | –ë–æ—Ç **–ø–ª–æ—Ö–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç/—Ü–∏—Ç–∏—Ä—É–µ—Ç** —Ä—É–±–∞–∏ —Ç–æ—á–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º |
| ‚úÖ –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã | –û—Ç–≤–µ—á–∞–µ—Ç —Ö–æ—Ä–æ—à–æ (–±–∏–æ–≥—Ä–∞—Ñ–∏—è, —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è) |
| üîß –ß–∞–Ω–∫–∏–Ω–≥ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —á–∞–Ω–∫–æ–≤ (300‚Äì800) –Ω–µ —É–ª—É—á—à–∏–ª–æ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |

---

## üìä –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

–ó–∞–ø—É—Å–∫ –æ—Ü–µ–Ω–∫–∏ —á–µ—Ä–µ–∑ LLM-judge:

bash python metrics.py


### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã (LLM-–æ—Ü–µ–Ω–∫–∞)

| –í–æ–ø—Ä–æ—Å | –û—Ç–≤–µ—Ç –±–æ—Ç–∞ | –û–∂–∏–¥–∞–ª–æ—Å—å | –û—Ü–µ–Ω–∫–∞ |
|--------|-----------|-----------|--------|
| –ö–µ–º –±—ã–ª –û–º–∞—Ä –•–∞–π—è–º? | —É—á—ë–Ω—ã–π (–º–∞—Ç–µ–º–∞—Ç–∏–∫, –∞—Å—Ç—Ä–æ–Ω–æ–º) | –ú–∞—Ç–µ–º–∞—Ç–∏–∫, –§–∏–ª–æ—Å–æ—Ñ, –ü–æ—ç—Ç | ‚ùå 0.0 |
| –†–æ–¥–∏–Ω–∞ –•–∞–π—è–º–∞? | –¥—Ä–µ–≤–Ω—è—è –ü–µ—Ä—Å–∏—è | –ü–µ—Ä—Å–∏—è | ‚úÖ 1.0 |
| –†–µ–ª–∏–≥–∏–æ–∑–Ω–∞—è –∫–Ω–∏–≥–∞? | –ö–æ—Ä–∞–Ω | –ö–æ—Ä–∞–Ω | ‚úÖ 1.0 |
| –î–µ—Ç—Å–∫–æ–µ —É–≤–ª–µ—á–µ–Ω–∏–µ? | –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ | –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—è | ‚ùå 0.0 |
| –î–æ–ª–∂–Ω–æ—Å—Ç—å —É —Å—É–ª—Ç–∞–Ω–∞? | –≥–ª–∞–≤–Ω—ã–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—å | –î—É—Ö–æ–≤–Ω–æ–≥–æ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞ | ‚ùå 0.0 |
| –ß—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª –≤ –æ–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏–∏? | –Ω–æ–≤—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å | –°–æ–ª–Ω–µ—á–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å | ‚ùå 0.0 |
| –í–∫–ª–∞–¥ –≤ –Ω–∞—É–∫—É? | –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ | –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∏ | ‚úÖ 1.0 |
| –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä—É–±–∞–∏? | –†—É–±–∞–∏ | –†—É–±–∞–∏ | ‚úÖ 1.0 |
| –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä—É–±–∞–∏ 1 | *–æ—Ç–∫–∞–∑* | *–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç* | ‚ùå 0.0 |
| –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä—É–±–∞–∏ 2 | *–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è* | *–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç* | ‚ùå 0.0 |

**–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞:** `0.31` (31% —Ç–æ—á–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤)

---



## üìù TODO / –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –£–ª—É—á—à–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä—É–±–∞–∏ (–≤–æ–∑–º–æ–∂–Ω–æ, –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –ø–æ —Å—Ç–∏—Ö–∞–º)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å




